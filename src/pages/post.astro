---
import Base from "../layout/base.astro";
import { Header1, Header2, Header3 } from "../components/styles/typo";
import CodeBlock from "../components/CodeBlock";
import {client} from "../../tina/__generated__/client";
const myPost = await client.queries.post({ relativePath: 'hello-world.md' })
import { TinaMarkdown } from "tinacms/dist/rich-text";
const components = {
    h1: Header1,
    h2: Header2,
    h3: Header3,
    code_block: CodeBlock,
};
---

<Base>
    <div class="flex flex-col xl:flex-row gap-12 xl:gap-32">
        <div>
            <ul class="steps xl:steps-vertical w-full sticky top-0" id="stepper">
                <li class="step step-primary">Step 1: Planning Your Animation</li>
                <li class="step">Step 2: Setting Up Your HTML</li>
                <li class="step">Conclusion</li>
            </ul>
        </div>
        <div class="bg-slate-100 py-10 px-8 flex-1">
            <Header1 extraClasses="text-center">Titel</Header1>
            <TinaMarkdown content={myPost.data.post.body} components={components} />
        </div>
    </div>
</Base>
<script src="/hljs/script.js" is:inline></script>
<script is:inline>
    document.addEventListener('DOMContentLoaded', (event) => {
        hljs.highlightAll();
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tags = document.getElementsByClassName('step');
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (!entry.isIntersecting) return;
                const slug = entry.target.innerHTML;
                const index = Array.from(tags).findIndex((el) => el.innerHTML === slug);
                Array.from(tags).forEach((el, i) => i <= index ? el.classList.add('step-primary') : el.classList.remove('step-primary'));
            });
        });

        // Track headers
        document.querySelectorAll('h2,h3,h4,h5,h6').forEach((section) => {
            observer.observe(section);
        });
    });
</script>